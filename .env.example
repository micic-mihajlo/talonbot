# Shared behavior
# Strict schema: unknown keys in .env fail startup.
NODE_ENV=production
LOG_LEVEL=info
DATA_DIR=~/.local/share/talonbot
SESSION_MAX_MESSAGES=500
SESSION_TTL_SECONDS=3600
SESSION_DEDUPE_WINDOW_MS=30000
CONTROL_HTTP_PORT=8080
CONTROL_AUTH_TOKEN=
CONTROL_SOCKET_PATH=~/.local/share/talonbot/control.sock
TALONBOT_SECRET_ALLOW_COMMAND=false
TALONBOT_SECRET_COMMAND_TIMEOUT_MS=3000
TALONBOT_SECRET_MAX_BYTES=8192

# Optional secret source selectors (default is env):
# <KEY>_FILE=/absolute/path/to/secret
# <KEY>_COMMAND=["/absolute/executable","arg1","arg2"]  # requires TALONBOT_SECRET_ALLOW_COMMAND=true
# <KEY>_BACKEND=env|file|command

MAX_QUEUE_PER_SESSION=16
MAX_MESSAGE_BYTES=12000

ENGINE_MODE=mock
ENGINE_COMMAND=
ENGINE_ARGS="--skill /path/to/talonbot/pi/skills/talon-control"
ENGINE_PROVIDER=
ENGINE_MODEL=
PI_SKIP_VERSION_CHECK=1
ENGINE_CWD=~/.local/share/talonbot/engine
ENGINE_TIMEOUT_MS=120000
WORKER_RUNTIME=inline
WORKER_SESSION_PREFIX=dev-agent
TMUX_BINARY=tmux
WORKER_TMUX_POLL_MS=500

# Orchestration
REPO_ROOT_DIR=~/workspace
WORKTREE_ROOT_DIR=~/workspace/worktrees
TASK_MAX_CONCURRENCY=3
WORKER_MAX_RETRIES=2
WORKTREE_STALE_HOURS=24
FAILED_WORKTREE_RETENTION_HOURS=24
TASK_STUCK_MINUTES=30
TASK_QUEUE_STALE_MINUTES=30
TASK_AUTOCLEANUP=true
TASK_AUTO_COMMIT=false
TASK_AUTO_PR=false
PR_CHECK_TIMEOUT_MS=900000
PR_CHECK_POLL_MS=15000

# Slack
SLACK_ENABLED=false
SLACK_BOT_TOKEN=your-slack-bot-token
SLACK_APP_TOKEN=your-slack-app-token
SLACK_SIGNING_SECRET=your-slack-signing-secret
SLACK_ALLOWED_CHANNELS=
SLACK_ALLOWED_CHANNEL_PREFIXES=
SLACK_ALLOWED_USERS=

# Discord
DISCORD_ENABLED=false
DISCORD_TOKEN=your-discord-bot-token
DISCORD_TYPING_ENABLED=true
DISCORD_REACTIONS_ENABLED=true
DISCORD_ALLOWED_CHANNELS=
DISCORD_ALLOWED_GUILDS=
DISCORD_ALLOWED_USERS=
